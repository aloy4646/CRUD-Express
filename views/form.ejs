<!-- pop-up keterangan error jika ada -->
<!-- berisi pesanError dari hasil validasi -->
<script>
    if ("<%= pesanError %>" !== "") {
        window.onload = function() {
            alert("<%= pesanError %>");
        };
    }
</script>


<!-- pengecekan apakah ada contact -->
<!-- jika ada maka method dari request tersebut adalah Update -->
<!-- Form akan terisi oleh nilai lama dari contact jika method dari request adalah Update -->
<% if (request === "PUT") { %>
    <form action="/contact?_method=PUT" method="POST">
<% } else { %>
    <form action="/contact" method="POST">
<% } %>

    
    <% if (request === "PUT") { %>
        <!-- oldName akan ditampilkan namun tidak dapat diedit -->
        <label for="oldName">Old Name:</label><br>
        <input type="text" id="oldName" name="oldName" value="<%= oldName %>" readonly><br><br>
    <% } else { %>
        <!-- oldName dihidden agar tetap dapat dipanggil dengan req.body nantinya -->
        <label for="oldName" hidden>Name:</label><br>
        <input type="text" id="oldName" name="oldName" value="<%= oldName %>" hidden><br><br>
    <% } %>

    <% if (request === "PUT") { %>
        <% if (contact.name == null) { %>
            <!-- jika request adalah Update dan contact.name sengaja dikosongkan maka input new name akan kosong -->
            <label for="name">New Name:</label><br>
            <input type="text" id="name" name="name"><br><br>
        <% } else {%>
            <!-- kondisi ini berjalan saat request PUT terdapat error dan form kembali dimunculkan namun dengan data sebelumnya -->
            <!-- data sebelumnya akan tetap dimunculkan meskipun error agar user dapat mengeditnya kembali -->
            <label for="name">New Name:</label><br>
            <input type="text" id="name" name="name" value="<%= contact.name %>"><br><br>
        <% } %>
    <% } else { %>
        <% if (contact && contact.name) { %>
            <!-- kondisi ini berjalan saat request POST terdapat error dan form kembali dimunculkan -->
            <label for="name">Name:</label><br>
            <input type="text" id="name" name="name" value="<%= contact.name %>"><br><br>
        <% } else {%>
            <!-- kondisi ini berjalan saat request POST pertama dilakukan -->
            <label for="name">Name:</label><br>
            <input type="text" id="name" name="name" required><br><br>
        <% } %>
    <% } %>
    
    <label for="email">Email:</label><br>
    <% if (contact != null && contact.email) { %>
        <input type="email" id="email" name="email" value="<%= contact.email %>"><br><br>
    <% } else { %>
        <input type="email" id="email" name="email"><br><br>
    <% } %>
    
    <label for="mobile">Mobile:</label><br>
    <% if (contact != null) { %>
        <input type="tel" id="mobile" name="mobile" value="<%= contact.mobile %>" required><br><br>
    <% } else { %>
        <input type="tel" id="mobile" name="mobile" required><br><br>
    <% } %>
    
    <button type="submit">Submit</button>
</form>

